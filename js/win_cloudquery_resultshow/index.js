apiready=function(){apiready_init(),vm.pageParam=api.pageParam;var e=vm.pageParam.map(function(e){return[e.lon,e.lat]});vm.rings=e,vm.$mount("#wrap")};var vm=new Vue({data:{pageParam:{},rings:[],title:"云查询结果展示",images:["../../image/1.jpg","../../image/2.png","../../image/3.png"],tdlyData:[],jbntData:[]},methods:{onClickLeft:function(){this.closeWin()}},mounted:function(){var n=this;init_arcgis_ajax(),this.fwcx_ajax("http://218.77.59.2:8599/arcgis/rest/services/pl/tdly/MapServer/0",this.rings).then(function(e){console.log(JSON.stringify(e.features.length));for(var t=[],a=0;a<e.features.length;a++){var r=e.features[a];t.push(r.attributes)}n.tdlyData=t}),this.fwcx_ajax("http://218.77.59.2:8599/arcgis/rest/services/pl/jbnt/MapServer/0",this.rings).then(function(e){console.log(JSON.stringify(e.features.length));for(var t=[],a=0;a<e.features.length;a++){var r=e.features[a];t.push(r.attributes)}n.jbntData=t})}});function random(e,t){return Math.floor(Math.random()*(t-e))+e}function requireMapJsInit(e){require(["esri/tasks/QueryTask","esri/tasks/support/Query"],function(e,t){var a,r,n,s;function i(e){console.log(e.features.length);var t=[];e.features.length=parseInt(e.features.length/2),6<e.features.length&&(e.features.length=6);for(var a=0;a<e.features.length;a++){var r=e.features[random(0,e.features.length-1)];t.push(r.attributes)}vm.tdlyData=t}function u(e){var t=[];e.features.length=parseInt(e.features.length/2),6<e.features.length&&(e.features.length=6);for(var a=0;a<e.features.length;a++){var r=e.features[random(0,e.features.length-1)];t.push(r.attributes)}vm.jbntData=t}function o(e){console.log("Promise rejected: ",e.message)}a=new e("http://218.77.59.2:8599/arcgis/rest/services/pl/tdly/MapServer/0"),(r=new t).returnGeometry=!0,r.outFields=["*"],r.where="",a.execute(r).then(i).catch(o),n=new e("http://218.77.59.2:8599/arcgis/rest/services/pl/jbnt/MapServer/0"),(s=new t).returnGeometry=!0,s.outFields=["*"],s.where="",n.execute(s).then(u).catch(o)})}