apiready=function(){apiready_init(),vm.$mount("#wrap")};var vm=new Vue({el:"#wrap",data:{form:{username:"",phone:"",code:""},btnDisabled:!1,sumitAllow:!0,time:12e4,timeFlag:!1},methods:{onClickLeft:function(){this.closeWin()},getCode:function(){this.timeFlag=!0},finished:function(){this.timeFlag=!1},findpwd:debounce(function(){var i=this;if(this.sumitAllow)if(this.username)if(this.pwd){if(this.quyu)return this.btnDisabled=!0,api.showProgress({title:"登录中...",modal:!1}),new Promise(function(t,e){var a={username:i.username,password:i.pwd};i.$ajax({url:"/api/auth/jwt/token",method:"post",data:a}).then(function(e){api.setPrefs({key:"username",value:i.username}),api.setPrefs({key:"pwd",value:i.pwd}),api.setGlobalData({key:"token",value:e.data.data});var a=JSON.parse(FormatJWT(e.data.data));api.setGlobalData({key:"userId",value:a.userId}),i.getAuth(),i.getOrgan(),t(e.data),i.openWin("win_nav")}).catch(function(e){api.removePrefs({key:"uesrname"}),api.removePrefs({key:"pwd"}),$api.clearStorage(),400!==e.status?500!==e.status&&setTimeout(function(){api.clearCache(function(){api.rebootApp()})},2500):api.toast({msg:e.data.message,duration:3e3})}).finally(function(){api.hideProgress(),i.btnDisabled=!1})});api.toast({msg:"请选择区域",duration:3e3})}else api.toast({msg:"密码不能为空",duration:3e3});else api.toast({msg:"用户名不能为空",duration:3e3})},400)},mounted:function(){}});