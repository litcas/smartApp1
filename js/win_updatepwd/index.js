apiready=function(){apiready_init(),vm.$mount("#wrap")};var vm=new Vue({el:"#wrap",data:{form:{pwd:"",newpwd:"",cnewpwd:""},btnDisabled:!1,sumitAllow:!0},methods:{onClickLeft:function(){this.closeWin()},updatepwd:debounce(function(){var i=this;if(this.sumitAllow)if(this.username)if(this.pwd){if(this.quyu)return this.btnDisabled=!0,api.showProgress({title:"登录中...",modal:!1}),new Promise(function(t,a){var e={username:i.username,password:i.pwd};i.$ajax({url:"/api/auth/jwt/token",method:"post",data:e}).then(function(a){api.setPrefs({key:"username",value:i.username}),api.setPrefs({key:"pwd",value:i.pwd}),api.setGlobalData({key:"token",value:a.data.data});var e=JSON.parse(FormatJWT(a.data.data));api.setGlobalData({key:"userId",value:e.userId}),i.getAuth(),i.getOrgan(),t(a.data),i.openWin("win_nav")}).catch(function(a){api.removePrefs({key:"uesrname"}),api.removePrefs({key:"pwd"}),$api.clearStorage(),400!==a.status?500!==a.status&&setTimeout(function(){api.clearCache(function(){api.rebootApp()})},2500):api.toast({msg:a.data.message,duration:3e3})}).finally(function(){api.hideProgress(),i.btnDisabled=!1})});api.toast({msg:"请选择区域",duration:3e3})}else api.toast({msg:"密码不能为空",duration:3e3});else api.toast({msg:"用户名不能为空",duration:3e3})},400)},mounted:function(){}});